window.ZeroClipboard={version:"1.0.8",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(b){return typeof b=="string"&&(b=document.getElementById(b)),b.addClass||(b.hide=function(){this.style.display="none"},b.show=function(){this.style.display=""},b.addClass=function(c){this.removeClass(c),this.className+=" "+c},b.removeClass=function(f){var e=this.className.split(/\s+/),h=-1;for(var g=0;g<e.length;g++){e[g]==f&&(h=g,g=e.length)}return h>-1&&(e.splice(h,1),this.className=e.join(" ")),this},b.hasClass=function(c){return !!this.className.match(new RegExp("\\s*"+c+"\\s*"))}),b},setMoviePath:function(b){this.moviePath=b},newClient:function(){return new ZeroClipboard.Client},dispatch:function(f,e,h){var g=this.clients[f];g&&g.receiveEvent(e,h)},register:function(d,c){this.clients[d]=c},getDOMObjectPosition:function(e,d){var f={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};while(e&&e!=d){f.left+=e.offsetLeft,f.left+=e.style.borderLeftWidth?parseInt(e.style.borderLeftWidth):0,f.top+=e.offsetTop,f.top+=e.style.borderTopWidth?parseInt(e.style.borderTopWidth):0,e=e.offsetParent}return f},Client:function(b){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),b&&this.glue(b)}},ZeroClipboard.Client.prototype={id:0,title:"",ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,zIndex:99,glue:function(h,g,m){this.domElement=ZeroClipboard.$(h),this.domElement.style.zIndex&&(this.zIndex=parseInt(this.domElement.style.zIndex,10)+1),this.domElement.getAttribute("title")!=null&&(this.title=this.domElement.getAttribute("title")),typeof g=="string"?g=ZeroClipboard.$(g):typeof g=="undefined"&&(g=document.getElementsByTagName("body")[0]);var l=ZeroClipboard.getDOMObjectPosition(this.domElement,g);this.div=document.createElement("div");var k=this.div.style;k.position="absolute",k.left=""+l.left+"px",k.top=""+l.top+"px",k.width=""+l.width+"px",k.height=""+l.height+"px",k.zIndex=this.zIndex;if(typeof m=="object"){for(var j in m){k[j]=m[j]}}g.appendChild(this.div),this.div.innerHTML=this.getHTML(l.width,l.height)},getHTML:function(h,g){var m="",l="id="+this.id+"&width="+h+"&height="+g,k=this.title?' title="'+this.title+'"':"";if(navigator.userAgent.match(/MSIE/)){var j=location.href.match(/^https/i)?"https://":"http://";m+="<object"+k+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+j+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+h+'" height="'+g+'" id="'+this.movieId+'"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+l+'"/><param name="wmode" value="transparent"/></object>'}else{m+="<embed"+k+' id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+h+'" height="'+g+'" name="'+this.movieId+'" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+l+'" wmode="transparent" />'}return m},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var d=document.getElementsByTagName("body")[0];try{d.removeChild(this.div)}catch(c){}this.domElement=null,this.div=null}},reposition:function(e){e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide());if(this.domElement&&this.div){var d=ZeroClipboard.getDOMObjectPosition(this.domElement),f=this.div.style;f.left=""+d.left+"px",f.top=""+d.top+"px"}},setText:function(b){this.clipText=b,this.ready&&this.movie.setText(b)},setTitle:function(b){this.title=b},addEventListener:function(d,c){d=d.toString().toLowerCase().replace(/^on/,""),this.handlers[d]||(this.handlers[d]=[]),this.handlers[d].push(c)},setHandCursor:function(b){this.handCursorEnabled=b,this.ready&&this.movie.setHandCursor(b)},setCSSEffects:function(b){this.cssEffects=!!b},receiveEvent:function(h,g){h=h.toString().toLowerCase().replace(/^on/,"");switch(h){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var m=this;setTimeout(function(){m.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var m=this;setTimeout(function(){m.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[h]){for(var l=0,k=this.handlers[h].length;l<k;l++){var j=this.handlers[h][l];typeof j=="function"?j(this,g):typeof j=="object"&&j.length==2?j[0][j[1]](this,g):typeof j=="string"&&window[j](this,g)}}}},typeof module!="undefined"&&(module.exports=ZeroClipboard);
/*! jQuery UI - v1.9.2 - 2012-12-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.slider.js, jquery.ui.tooltip.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
(function(f,b){function a(j,m){var k,h,l,e=j.nodeName.toLowerCase();return"area"===e?(k=j.parentNode,h=k.name,!j.href||!h||k.nodeName.toLowerCase()!=="map"?!1:(l=f("img[usemap=#"+h+"]")[0],!!l&&c(l))):(/input|select|textarea|button|object/.test(e)?!j.disabled:"a"===e?j.href||m:m)&&c(j)}function c(e){return f.expr.filters.visible(e)&&!f(e).parents().andSelf().filter(function(){return f.css(this,"visibility")==="hidden"}).length}var g=0,d=/^ui-id-\d+$/;f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),f.fn.extend({_focus:f.fn.focus,focus:function(e,h){return typeof e=="number"?this.each(function(){var j=this;setTimeout(function(){f(j).focus(),h&&h.call(j)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return f.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?e=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.css(this,"position"))&&/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0):e=this.parents().filter(function(){return/(auto|scroll)/.test(f.css(this,"overflow")+f.css(this,"overflow-y")+f.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?f(document):e},zIndex:function(k){if(k!==b){return this.css("zIndex",k)}if(this.length){var j=f(this[0]),e,h;while(j.length&&j[0]!==document){e=j.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){h=parseInt(j.css("zIndex"),10);if(!isNaN(h)&&h!==0){return h}}j=j.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++g)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&f(this).removeAttr("id")})}}),f.extend(f.expr[":"],{data:f.expr.createPseudo?f.expr.createPseudo(function(e){return function(h){return !!f.data(h,e)}}):function(e,j,h){return !!f.data(e,h[3])},focusable:function(e){return a(e,!isNaN(f.attr(e,"tabindex")))},tabbable:function(e){var j=f.attr(e,"tabindex"),h=isNaN(j);return(h||j>=0)&&a(e,!h)}}),f(function(){var e=document.body,h=e.appendChild(h=document.createElement("div"));h.offsetHeight,f.extend(h.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=h.offsetHeight===100,f.support.selectstart="onselectstart" in h,e.removeChild(h).style.display="none"}),f("<a>").outerWidth(1).jquery||f.each(["Width","Height"],function(m,k){function e(o,u,q,p){return f.each(h,function(){u-=parseFloat(f.css(o,"padding"+this))||0,q&&(u-=parseFloat(f.css(o,"border"+this+"Width"))||0),p&&(u-=parseFloat(f.css(o,"margin"+this))||0)}),u}var h=k==="Width"?["Left","Right"]:["Top","Bottom"],j=k.toLowerCase(),l={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+k]=function(o){return o===b?l["inner"+k].call(this):this.each(function(){f(this).css(j,e(this,o)+"px")})},f.fn["outer"+k]=function(o,p){return typeof o!="number"?l["outer"+k].call(this,o):this.each(function(){f(this).css(j,e(this,o,!0,p)+"px")})}}),f("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(f.fn.removeData=function(e){return function(h){return arguments.length?e.call(this,f.camelCase(h)):e.call(this)}}(f.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];f.ui.ie=e.length?!0:!1,f.ui.ie6=parseFloat(e[1],10)===6}(),f.fn.extend({disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.extend(f.ui,{plugin:{add:function(h,l,k){var e,j=f.ui[h].prototype;for(e in k){j.plugins[e]=j.plugins[e]||[],j.plugins[e].push([l,k[e]])}},call:function(l,j,m){var k,h=l.plugins[j];if(!h||!l.element[0].parentNode||l.element[0].parentNode.nodeType===11){return}for(k=0;k<h.length;k++){l.options[h[k][0]]&&h[k][1].apply(l.element,m)}}},contains:f.contains,hasScroll:function(h,k){if(f(h).css("overflow")==="hidden"){return !1}var j=k&&k==="left"?"scrollLeft":"scrollTop",e=!1;return h[j]>0?!0:(h[j]=1,e=h[j]>0,h[j]=0,e)},isOverAxis:function(j,h,k){return j>h&&j<h+k},isOver:function(h,m,k,e,j,l){return f.ui.isOverAxis(h,k,j)&&f.ui.isOverAxis(m,e,l)}})})(jQuery);(function(d,b){var f=0,c=Array.prototype.slice,a=d.cleanData;d.cleanData=function(e){for(var j=0,h;(h=e[j])!=null;j++){try{d(h).triggerHandler("remove")}catch(g){}}a(e)},d.widget=function(j,p,l){var h,k,m,g,e=j.split(".")[0];j=j.split(".")[1],h=e+"-"+j,l||(l=p,p=d.Widget),d.expr[":"][h.toLowerCase()]=function(n){return !!d.data(n,h)},d[e]=d[e]||{},k=d[e][j],m=d[e][j]=function(o,n){if(!this._createWidget){return new m(o,n)}arguments.length&&this._createWidget(o,n)},d.extend(m,k,{version:l.version,_proto:d.extend({},l),_childConstructors:[]}),g=new p,g.options=d.widget.extend({},g.options),d.each(l,function(o,n){d.isFunction(n)&&(l[o]=function(){var s=function(){return p.prototype[o].apply(this,arguments)},q=function(r){return p.prototype[o].apply(this,r)};return function(){var r=this._super,v=this._superApply,u;return this._super=s,this._superApply=q,u=n.apply(this,arguments),this._super=r,this._superApply=v,u}}())}),m.prototype=d.widget.extend(g,{widgetEventPrefix:k?g.widgetEventPrefix:j},l,{constructor:m,namespace:e,widgetName:j,widgetBaseClass:h,widgetFullName:h}),k?(d.each(k._childConstructors,function(o,s){var q=s.prototype;d.widget(q.namespace+"."+q.widgetName,m,s._proto)}),delete k._childConstructors):p._childConstructors.push(m),d.widget.bridge(j,m)},d.widget.extend=function(l){var h=c.call(arguments,1),j=0,k=h.length,g,e;for(;j<k;j++){for(g in h[j]){e=h[j][g],h[j].hasOwnProperty(g)&&e!==b&&(d.isPlainObject(e)?l[g]=d.isPlainObject(l[g])?d.widget.extend({},l[g],e):d.widget.extend({},e):l[g]=e)}}return l},d.widget.bridge=function(h,e){var g=e.prototype.widgetFullName||h;d.fn[h]=function(m){var k=typeof m=="string",j=c.call(arguments,1),l=this;return m=!k&&j.length?d.widget.extend.apply(null,[m].concat(j)):m,k?this.each(function(){var o,n=d.data(this,g);if(!n){return d.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+m+"'")}if(!d.isFunction(n[m])||m.charAt(0)==="_"){return d.error("no such method '"+m+"' for "+h+" widget instance")}o=n[m].apply(n,j);if(o!==n&&o!==b){return l=o&&o.jquery?l.pushStack(o.get()):o,!1}}):this.each(function(){var n=d.data(this,g);n?n.option(m||{})._init():d.data(this,g,new e(m,this))}),l}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,g){g=d(g||this.defaultElement||this)[0],this.element=d(g),this.uuid=f++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=d.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=d(),this.hoverable=d(),this.focusable=d(),g!==this&&(d.data(g,this.widgetName,this),d.data(g,this.widgetFullName,this),this._on(!0,this.element,{remove:function(h){h.target===g&&this.destroy()}}),this.document=d(g.style?g.ownerDocument:g.document||g),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(l,j){var g=l,h,k,e;if(arguments.length===0){return d.widget.extend({},this.options)}if(typeof l=="string"){g={},h=l.split("."),l=h.shift();if(h.length){k=g[l]=d.widget.extend({},this.options[l]);for(e=0;e<h.length-1;e++){k[h[e]]=k[h[e]]||{},k=k[h[e]]}l=h.pop();if(j===b){return k[l]===b?null:k[l]}k[l]=j}else{if(j===b){return this.options[l]===b?null:this.options[l]}g[l]=j}}return this._setOptions(g),this},_setOptions:function(h){var g;for(g in h){this._setOption(g,h[g])}return this},_setOption:function(h,g){return this.options[h]=g,h==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(g,k,j){var e,h=this;typeof g!="boolean"&&(j=k,k=g,g=!1),j?(k=e=d(k),this.bindings=this.bindings.add(k)):(j=k,k=this.element,e=this.widget()),d.each(j,function(q,t){function p(){if(!g&&(h.options.disabled===!0||d(this).hasClass("ui-state-disabled"))){return}return(typeof t=="string"?h[t]:t).apply(h,arguments)}typeof t!="string"&&(p.guid=t.guid=t.guid||p.guid||d.guid++);var n=q.match(/^(\w+)\s*(.*)$/),s=n[1]+h.eventNamespace,m=n[2];m?e.delegate(m,s,p):k.bind(s,p)})},_off:function(h,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,h.unbind(g).undelegate(g)},_delay:function(j,g){function k(){return(typeof j=="string"?h[j]:j).apply(h,arguments)}var h=this;return setTimeout(k,g||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(g){d(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){d(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(g){d(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){d(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(g,l,j){var e,h,k=this.options[g];j=j||{},l=d.Event(l),l.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase(),l.target=this.element[0],h=l.originalEvent;if(h){for(e in h){e in l||(l[e]=h[e])}}return this.element.trigger(l,j),!(d.isFunction(k)&&k.apply(this.element[0],[l].concat(j))===!1||l.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(e,g){d.Widget.prototype["_"+e]=function(l,j,k){typeof j=="string"&&(j={effect:j});var m,h=j?j===!0||typeof j=="number"?g:j.effect||g:e;j=j||{},typeof j=="number"&&(j={duration:j}),m=!d.isEmptyObject(j),j.complete=k,j.delay&&l.delay(j.delay),m&&d.effects&&(d.effects.effect[h]||d.uiBackCompat!==!1&&d.effects[h])?l[e](j):h!==e&&l[h]?l[h](j.duration,j.easing,k):l.queue(function(o){d(this)[e](),k&&k.call(l[0]),o()})}}),d.uiBackCompat!==!1&&(d.Widget.prototype._getCreateOptions=function(){return d.metadata&&d.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(b,a){var c=!1;b(document).mouseup(function(d){c=!1}),b.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(e){if(!0===b.data(e.target,d.widgetName+".preventClickEvent")){return b.removeData(e.target,d.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(c){return}this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var g=this,d=e.which===1,f=typeof this.options.cancel=="string"&&e.target.nodeName?b(e.target).closest(this.options.cancel).length:!1;if(!d||f||!this._mouseCapture(e)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==!1;if(!this._mouseStarted){return e.preventDefault(),!0}}return !0===b.data(e.target,this.widgetName+".preventClickEvent")&&b.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(h){return g._mouseMove(h)},this._mouseUpDelegate=function(h){return g._mouseUp(h)},b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0},_mouseMove:function(d){return !b.ui.ie||document.documentMode>=9||!!d.button?this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==!1,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted):this._mouseUp(d)},_mouseUp:function(d){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&b.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d)),!1},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(d){return this.mouseDelayMet},_mouseStart:function(d){},_mouseDrag:function(d){},_mouseStop:function(d){},_mouseCapture:function(d){return !0}})})(jQuery);(function(w,A){function q(c,a,f){return[parseInt(c[0],10)*(k.test(c[0])?a/100:1),parseInt(c[1],10)*(k.test(c[1])?f/100:1)]}function d(a,c){return parseInt(w.css(a,c),10)||0}w.ui=w.ui||{};var j,b=Math.max,m=Math.abs,B=Math.round,g=/left|center|right/,z=/top|center|bottom/,y=/[\+\-]\d+%?/,v=/^\w+/,k=/%$/,x=w.fn.position;w.position={scrollbarWidth:function(){if(j!==A){return j}var e,a,c=w("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=c.children()[0];return w("body").append(c),e=f.offsetWidth,c.css("overflow","scroll"),a=f.offsetWidth,e===a&&(a=c[0].clientWidth),c.remove(),j=e-a},getScrollInfo:function(c){var h=c.isWindow?"":c.element.css("overflow-x"),f=c.isWindow?"":c.element.css("overflow-y"),a=h==="scroll"||h==="auto"&&c.width<c.element[0].scrollWidth,e=f==="scroll"||f==="auto"&&c.height<c.element[0].scrollHeight;return{width:a?w.position.scrollbarWidth():0,height:e?w.position.scrollbarWidth():0}},getWithinInfo:function(a){var e=w(a||window),c=w.isWindow(e[0]);return{element:e,isWindow:c,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:c?e.width():e.outerWidth(),height:c?e.height():e.outerHeight()}}},w.fn.position=function(C){if(!C||!C.of){return x.apply(this,arguments)}C=w.extend({},C);var a,e,o,u,c,h=w(C.of),r=w.position.getWithinInfo(C.within),p=w.position.getScrollInfo(r),s=h[0],D=(C.collision||"flip").split(" "),f={};return s.nodeType===9?(e=h.width(),o=h.height(),u={top:0,left:0}):w.isWindow(s)?(e=h.width(),o=h.height(),u={top:h.scrollTop(),left:h.scrollLeft()}):s.preventDefault?(C.at="left top",e=o=0,u={top:s.pageY,left:s.pageX}):(e=h.outerWidth(),o=h.outerHeight(),u=h.offset()),c=w.extend({},u),w.each(["my","at"],function(){var t=(C[this]||"").split(" "),E,l;t.length===1&&(t=g.test(t[0])?t.concat(["center"]):z.test(t[0])?["center"].concat(t):["center","center"]),t[0]=g.test(t[0])?t[0]:"center",t[1]=z.test(t[1])?t[1]:"center",E=y.exec(t[0]),l=y.exec(t[1]),f[this]=[E?E[0]:0,l?l[0]:0],C[this]=[v.exec(t[0])[0],v.exec(t[1])[0]]}),D.length===1&&(D[1]=D[0]),C.at[0]==="right"?c.left+=e:C.at[0]==="center"&&(c.left+=e/2),C.at[1]==="bottom"?c.top+=o:C.at[1]==="center"&&(c.top+=o/2),a=q(f.at,e,o),c.left+=a[0],c.top+=a[1],this.each(function(){var n,L,I=w(this),F=I.outerWidth(),H=I.outerHeight(),K=d(this,"marginLeft"),J=d(this,"marginTop"),E=F+K+d(this,"marginRight")+p.width,G=H+J+d(this,"marginBottom")+p.height,l=w.extend({},c),t=q(f.my,I.outerWidth(),I.outerHeight());C.my[0]==="right"?l.left-=F:C.my[0]==="center"&&(l.left-=F/2),C.my[1]==="bottom"?l.top-=H:C.my[1]==="center"&&(l.top-=H/2),l.left+=t[0],l.top+=t[1],w.support.offsetFractions||(l.left=B(l.left),l.top=B(l.top)),n={marginLeft:K,marginTop:J},w.each(["left","top"],function(N,M){w.ui.position[D[N]]&&w.ui.position[D[N]][M](l,{targetWidth:e,targetHeight:o,elemWidth:F,elemHeight:H,collisionPosition:n,collisionWidth:E,collisionHeight:G,offset:[a[0]+t[0],a[1]+t[1]],my:C.my,at:C.at,within:r,elem:I})}),w.fn.bgiframe&&I.bgiframe(),C.using&&(L=function(P){var R=u.left-l.left,O=R+e-F,Q=u.top-l.top,M=Q+o-H,N={target:{element:h,left:u.left,top:u.top,width:e,height:o},element:{element:I,left:l.left,top:l.top,width:F,height:H},horizontal:O<0?"left":R>0?"right":"center",vertical:M<0?"top":Q>0?"bottom":"middle"};e<F&&m(R+O)<e&&(N.horizontal="center"),o<H&&m(Q+M)<o&&(N.vertical="middle"),b(m(R),m(O))>b(m(Q),m(M))?N.important="horizontal":N.important="vertical",C.using.call(this,P,N)}),I.offset(w.extend(l,{using:L}))})},w.ui.position={fit:{left:function(r,E){var h=E.within,l=h.isWindow?h.scrollLeft:h.offset.left,F=h.width,c=r.left-E.collisionPosition.marginLeft,D=l-c,C=c+E.collisionWidth-F-l,p;E.collisionWidth>F?D>0&&C<=0?(p=r.left+D+E.collisionWidth-F-l,r.left+=D-p):C>0&&D<=0?r.left=l:D>C?r.left=l+F-E.collisionWidth:r.left=l:D>0?r.left+=D:C>0?r.left-=C:r.left=b(r.left-c,r.left)},top:function(r,E){var h=E.within,l=h.isWindow?h.scrollTop:h.offset.top,F=E.within.height,c=r.top-E.collisionPosition.marginTop,D=l-c,C=c+E.collisionHeight-F-l,p;E.collisionHeight>F?D>0&&C<=0?(p=r.top+D+E.collisionHeight-F-l,r.top+=D-p):C>0&&D<=0?r.top=l:D>C?r.top=l+F-E.collisionHeight:r.top=l:D>0?r.top+=D:C>0?r.top-=C:r.top=b(r.top-c,r.top)}},flip:{left:function(J,O){var F=O.within,C=F.offset.left+F.scrollLeft,P=F.width,E=F.isWindow?F.scrollLeft:F.offset.left,N=J.left-O.collisionPosition.marginLeft,M=N-E,I=N+O.collisionWidth-P-E,G=O.my[0]==="left"?-O.elemWidth:O.my[0]==="right"?O.elemWidth:0,L=O.at[0]==="left"?O.targetWidth:O.at[0]==="right"?-O.targetWidth:0,H=-2*O.offset[0],D,K;if(M<0){D=J.left+G+L+H+O.collisionWidth-P-C;if(D<0||D<m(M)){J.left+=G+L+H}}else{if(I>0){K=J.left-O.collisionPosition.marginLeft+G+L+H-E;if(K>0||m(K)<I){J.left+=G+L+H}}}},top:function(J,P){var F=P.within,C=F.offset.top+F.scrollTop,Q=F.height,E=F.isWindow?F.scrollTop:F.offset.top,O=J.top-P.collisionPosition.marginTop,M=O-E,I=O+P.collisionHeight-Q-E,G=P.my[1]==="top",L=G?-P.elemHeight:P.my[1]==="bottom"?P.elemHeight:0,H=P.at[1]==="top"?P.targetHeight:P.at[1]==="bottom"?-P.targetHeight:0,D=-2*P.offset[1],K,N;M<0?(N=J.top+L+H+D+P.collisionHeight-Q-C,J.top+L+H+D>M&&(N<0||N<m(M))&&(J.top+=L+H+D)):I>0&&(K=J.top-P.collisionPosition.marginTop+L+H+D-E,J.top+L+H+D>I&&(K>0||m(K)<I)&&(J.top+=L+H+D))}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}},function(){var e,p,h,c,f,l=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(l?"div":"body"),h={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&w.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in h){e.style[f]=h[f]}e.appendChild(a),p=l||document.documentElement,p.insertBefore(e,p.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",c=w(a).offset().left,w.support.offsetFractions=c>10&&c<11,e.innerHTML="",p.removeChild(e)}(),w.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(h){if(!h||!h.offset){return c.call(this,h)}var e=h.offset.split(" "),f=h.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(h,{at:f[0]+e[0]+" "+f[1]+e[1],offset:A}))}}(jQuery)})(jQuery);(function(b,a){var c=5;b.widget("ui.slider",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var f,h,e=this.options,g=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),j="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",d=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":"")),this.range=b([]),e.range&&(e.range===!0&&(e.values||(e.values=[this._valueMin(),this._valueMin()]),e.values.length&&e.values.length!==2&&(e.values=[e.values[0],e.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(e.range==="min"||e.range==="max"?" ui-slider-range-"+e.range:""))),h=e.values&&e.values.length||1;for(f=g.length;f<h;f++){d.push(j)}this.handles=g.add(b(d.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(k){k.preventDefault()}).mouseenter(function(){e.disabled||b(this).addClass("ui-state-hover")}).mouseleave(function(){b(this).removeClass("ui-state-hover")}).focus(function(){e.disabled?b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")}),this.handles.each(function(k){b(this).data("ui-slider-handle-index",k)}),this._on(this.handles,{keydown:function(m){var p,l,n,q,k=b(m.target).data("ui-slider-handle-index");switch(m.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:m.preventDefault();if(!this._keySliding){this._keySliding=!0,b(m.target).addClass("ui-state-active"),p=this._start(m,k);if(p===!1){return}}}q=this.options.step,this.options.values&&this.options.values.length?l=n=this.values(k):l=n=this.value();switch(m.keyCode){case b.ui.keyCode.HOME:n=this._valueMin();break;case b.ui.keyCode.END:n=this._valueMax();break;case b.ui.keyCode.PAGE_UP:n=this._trimAlignValue(l+(this._valueMax()-this._valueMin())/c);break;case b.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(l-(this._valueMax()-this._valueMin())/c);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(l===this._valueMax()){return}n=this._trimAlignValue(l+q);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(l===this._valueMin()){return}n=this._trimAlignValue(l-q)}this._slide(m,k,n)},keyup:function(k){var l=b(k.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(k,l),this._change(k,l),b(k.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(v){var g,d,j,w,e,q,p,k,h=this,m=this.options;return m.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),g={x:v.pageX,y:v.pageY},d=this._normValueFromMouse(g),j=this._valueMax()-this._valueMin()+1,this.handles.each(function(f){var l=Math.abs(d-h.values(f));j>l&&(j=l,w=b(this),e=f)}),m.range===!0&&this.values(1)===m.min&&(e+=1,w=b(this.handles[e])),q=this._start(v,e),q===!1?!1:(this._mouseSliding=!0,this._handleIndex=e,w.addClass("ui-state-active").focus(),p=w.offset(),k=!b(v.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:v.pageX-p.left-w.width()/2,top:v.pageY-p.top-w.height()/2-(parseInt(w.css("borderTopWidth"),10)||0)-(parseInt(w.css("borderBottomWidth"),10)||0)+(parseInt(w.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(v,e,d),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(f){var d={x:f.pageX,y:f.pageY},g=this._normValueFromMouse(d);return this._slide(f,this._handleIndex,g),!1},_mouseStop:function(d){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(d,this._handleIndex),this._change(d,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(j){var f,k,h,d,g;return this.orientation==="horizontal"?(f=this.elementSize.width,k=j.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(f=this.elementSize.height,k=j.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),h=k/f,h>1&&(h=1),h<0&&(h=0),this.orientation==="vertical"&&(h=1-h),d=this._valueMax()-this._valueMin(),g=this._valueMin()+h*d,this._trimAlignValue(g)},_start:function(f,d){var g={handle:this.handles[d],value:this.value()};return this.options.values&&this.options.values.length&&(g.value=this.values(d),g.values=this.values()),this._trigger("start",f,g)},_slide:function(j,f,k){var h,d,g;this.options.values&&this.options.values.length?(h=this.values(f?0:1),this.options.values.length===2&&this.options.range===!0&&(f===0&&k>h||f===1&&k<h)&&(k=h),k!==this.values(f)&&(d=this.values(),d[f]=k,g=this._trigger("slide",j,{handle:this.handles[f],value:k,values:d}),h=this.values(f?0:1),g!==!1&&this.values(f,k,!0))):k!==this.value()&&(g=this._trigger("slide",j,{handle:this.handles[f],value:k}),g!==!1&&this.value(k))},_stop:function(f,d){var g={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(g.value=this.values(d),g.values=this.values()),this._trigger("stop",f,g)},_change:function(f,d){if(!this._keySliding&&!this._mouseSliding){var g={handle:this.handles[d],value:this.value()};this.options.values&&this.options.values.length&&(g.value=this.values(d),g.values=this.values()),this._trigger("change",f,g)}},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(e,h){var g,d,f;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(h),this._refreshValue(),this._change(null,e);return}if(!arguments.length){return this._values()}if(!b.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(e):this.value()}g=this.options.values,d=arguments[0];for(f=0;f<g.length;f+=1){g[f]=this._trimAlignValue(d[f]),this._change(null,f)}this._refreshValue()},_setOption:function(e,g){var f,d=0;b.isArray(this.options.values)&&(d=this.options.values.length),b.Widget.prototype._setOption.apply(this,arguments);switch(e){case"disabled":g?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(f=0;f<d;f+=1){this._change(null,f)}this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var d=this.options.value;return d=this._trimAlignValue(d),d},_values:function(g){var d,h,f;if(arguments.length){return d=this.options.values[g],d=this._trimAlignValue(d),d}h=this.options.values.slice();for(f=0;f<h.length;f+=1){h[f]=this._trimAlignValue(h[f])}return h},_trimAlignValue:function(g){if(g<=this._valueMin()){return this._valueMin()}if(g>=this._valueMax()){return this._valueMax()}var d=this.options.step>0?this.options.step:1,h=(g-this._valueMin())%d,f=g-h;return Math.abs(h)*2>=d&&(f+=h>0?d:-d),parseFloat(f.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var q,g,d,j,v,e=this.options.range,p=this.options,m=this,k=this._animateOff?!1:p.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(f){g=(m.values(f)-m._valueMin())/(m._valueMax()-m._valueMin())*100,h[m.orientation==="horizontal"?"left":"bottom"]=g+"%",b(this).stop(1,1)[k?"animate":"css"](h,p.animate),m.options.range===!0&&(m.orientation==="horizontal"?(f===0&&m.range.stop(1,1)[k?"animate":"css"]({left:g+"%"},p.animate),f===1&&m.range[k?"animate":"css"]({width:g-q+"%"},{queue:!1,duration:p.animate})):(f===0&&m.range.stop(1,1)[k?"animate":"css"]({bottom:g+"%"},p.animate),f===1&&m.range[k?"animate":"css"]({height:g-q+"%"},{queue:!1,duration:p.animate}))),q=g}):(d=this.value(),j=this._valueMin(),v=this._valueMax(),g=v!==j?(d-j)/(v-j)*100:0,h[this.orientation==="horizontal"?"left":"bottom"]=g+"%",this.handle.stop(1,1)[k?"animate":"css"](h,p.animate),e==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[k?"animate":"css"]({width:g+"%"},p.animate),e==="max"&&this.orientation==="horizontal"&&this.range[k?"animate":"css"]({width:100-g+"%"},{queue:!1,duration:p.animate}),e==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[k?"animate":"css"]({height:g+"%"},p.animate),e==="max"&&this.orientation==="vertical"&&this.range[k?"animate":"css"]({height:100-g+"%"},{queue:!1,duration:p.animate}))}})})(jQuery);(function(c){function d(e,g){var f=(e.attr("aria-describedby")||"").split(/\s+/);f.push(g),e.data("ui-tooltip-id",g).attr("aria-describedby",c.trim(f.join(" ")))}function b(f){var h=f.data("ui-tooltip-id"),g=(f.attr("aria-describedby")||"").split(/\s+/),e=c.inArray(h,g);e!==-1&&g.splice(e,1),f.removeData("ui-tooltip-id"),g=c.trim(g.join(" ")),g?f.attr("aria-describedby",g):f.removeAttr("aria-describedby")}var a=0;c.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return c(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,g){var f=this;if(e==="disabled"){this[g?"_disable":"_enable"](),this.options[e]=g;return}this._super(e,g),e==="content"&&c.each(this.tooltips,function(j,h){f._updateContent(h)})},_disable:function(){var e=this;c.each(this.tooltips,function(h,g){var f=c.Event("blur");f.target=f.currentTarget=g[0],e.close(f,!0)}),this.element.find(this.options.items).andSelf().each(function(){var f=c(this);f.is("[title]")&&f.data("ui-tooltip-title",f.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var e=c(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var g=this,f=c(e?e.target:this.element).closest(this.options.items);if(!f.length||f.data("ui-tooltip-id")){return}f.attr("title")&&f.data("ui-tooltip-title",f.attr("title")),f.data("ui-tooltip-open",!0),e&&e.type==="mouseover"&&f.parents().each(function(){var h=c(this),j;h.data("ui-tooltip-open")&&(j=c.Event("blur"),j.target=j.currentTarget=this,g.close(j,!0)),h.attr("title")&&(h.uniqueId(),g.parents[this.id]={element:this,title:h.attr("title")},h.attr("title",""))}),this._updateContent(f,e)},_updateContent:function(k,g){var l,j=this.options.content,f=this,h=g?g.type:null;if(typeof j=="string"){return this._open(g,k,j)}l=j.call(k[0],function(e){if(!k.data("ui-tooltip-open")){return}f._delay(function(){g&&(g.type=h),this._open(g,k,e)})}),l&&this._open(g,k,l)},_open:function(j,l,h){function m(f){e.of=f;if(k.is(":hidden")){return}k.position(e)}var k,n,g,e=c.extend({},this.options.position);if(!h){return}k=this._find(l);if(k.length){k.find(".ui-tooltip-content").html(h);return}l.is("[title]")&&(j&&j.type==="mouseover"?l.attr("title",""):l.removeAttr("title")),k=this._tooltip(l),d(l,k.attr("id")),k.find(".ui-tooltip-content").html(h),this.options.track&&j&&/^mouse/.test(j.type)?(this._on(this.document,{mousemove:m}),m(j)):k.position(c.extend({of:l},this.options.position)),k.hide(),this._show(k,this.options.show),this.options.show&&this.options.show.delay&&(g=setInterval(function(){k.is(":visible")&&(m(e.of),clearInterval(g))},c.fx.interval)),this._trigger("open",j,{tooltip:k}),n={keyup:function(f){if(f.keyCode===c.ui.keyCode.ESCAPE){var o=c.Event(f);o.currentTarget=l[0],this.close(o,!0)}},remove:function(){this._removeTooltip(k)}};if(!j||j.type==="mouseover"){n.mouseleave="close"}if(!j||j.type==="focusin"){n.focusout="close"}this._on(!0,l,n)},close:function(f){var h=this,e=c(f?f.currentTarget:this.element),g=this._find(e);if(this.closing){return}e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),b(e),g.stop(!0),this._hide(g,this.options.hide,function(){h._removeTooltip(c(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),f&&f.type==="mouseleave"&&c.each(this.parents,function(j,k){c(k.element).attr("title",k.title),delete h.parents[j]}),this.closing=!0,this._trigger("close",f,{tooltip:g}),this.closing=!1},_tooltip:function(g){var f="ui-tooltip-"+a++,e=c("<div>").attr({id:f,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return c("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),c.fn.bgiframe&&e.bgiframe(),this.tooltips[f]=g,e},_find:function(e){var f=e.data("ui-tooltip-id");return f?c("#"+f):c()},_removeTooltip:function(f){f.remove(),delete this.tooltips[f.attr("id")]},_destroy:function(){var e=this;c.each(this.tooltips,function(h,g){var f=c.Event("blur");f.target=f.currentTarget=g[0],e.close(f,!0),c("#"+h).remove(),g.data("ui-tooltip-title")&&(g.attr("title",g.data("ui-tooltip-title")),g.removeData("ui-tooltip-title"))})}})})(jQuery);(function(f){f.support.touch="ontouchend" in document;if(!f.support.touch){return}var k=f.ui.mouse.prototype,h=k._mouseInit,g;function j(c,b){if(c.originalEvent.touches.length>1){return}c.preventDefault();var a=c.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);c.target.dispatchEvent(d)}k._touchStart=function(a){var b=this;if(g||!b._mouseCapture(a.originalEvent.changedTouches[0])){return}g=true;b._touchMoved=false;j(a,"mouseover");j(a,"mousemove");j(a,"mousedown")};k._touchMove=function(a){if(!g){return}this._touchMoved=true;j(a,"mousemove")};k._touchEnd=function(a){if(!g){return}j(a,"mouseup");j(a,"mouseout");if(!this._touchMoved){j(a,"click")}g=false};k._mouseInit=function(){var a=this;a.element.bind("touchstart",f.proxy(a,"_touchStart")).bind("touchmove",f.proxy(a,"_touchMove")).bind("touchend",f.proxy(a,"_touchEnd"));h.call(a)}})(jQuery);UserAgent={};UserAgent.searchPage=null;UserAgent.searchResultsPage=null;UserAgent.stylesPage=null;UserAgent.moodsPage=null;UserAgent.topPage=null;UserAgent.manualHistory=["#search"];UserAgent.miniWidth=null;UserAgent.changePage=function(b){var a=$("div.page,#permafooter").not(b);$("#clip_content").css("visibility","hidden");a.not(":eq(0)").fadeOut(200);a.first().fadeOut(200,function(){$(b).hide().fadeIn(200,function(){if(b!="#search_results"){$("#permafooter").show()}if(b=="#search_results"){if(!Output.clipboard&&$("#clip_content").css("display")!="none"){ZeroClipboard.setMoviePath("http://www.nickschaden.com/echospot/swf/ZeroClipboard.swf");Output.clipboard=new ZeroClipboard.Client();Output.clipboard.glue("clip_button","clip_container");Output.clipboard.addEventListener("onMouseDown",function(){Output.clipboard.setText(Output.contentSongLinkRows.join("\n"))});Output.clipboard.addEventListener("onComplete",function(){$(".copy_success").addClass("active");setTimeout(function(){$(".copy_success").removeClass("active")},4000)})}}})});if(b!="#search_results"&&b!="#copydata"){$("#permaheader").find(".csv_container,.spot_container").removeClass("active")}if(b=="#search"){$("#permaheader nav a.top").removeClass("active");if($("#search-byartist")[0].checked){$("#permaheader nav a.artist").addClass("active")}else{if($("#search-byplaylist")[0].checked){$("#permaheader nav a.playlist").addClass("active")}else{$("#permaheader nav a.song").addClass("active")}}}else{if(b=="#top"){$("#permaheader nav a").removeClass("active");$("#permaheader nav a.top").addClass("active")}}if(Modernizr.history){history.pushState({page:b},null,"");UserAgent.manualHistory.push(b)}};if(Modernizr.history){window.onpopstate=function(b){if(UserAgent.manualHistory.length>1){UserAgent.manualHistory.pop();var a=UserAgent.manualHistory.pop();UserAgent.changePage(a)}}}$(function(){UserAgent.miniWidth=($(window).width()<=480);var c=document.location.href.split("#");if(c.length>1&&c[1]!="top"&&c[1]!="search"){document.location.href=c[0]+"#search"}$("#permaheader").find("nav li a").click(function(){$this=$(this);if($this.hasClass("active")){return false}if($this.hasClass("playlist_generate")){$("#copydata").find("textarea").val(Output.contentSongLinkRows.join("\n"));UserAgent.changePage("#copydata")}else{if($this.hasClass("csv")){var d=Output.plainTextContentRows.join("\n");$("#save-csv input").val(d);$("#save-csv").submit()}else{if($("#help").length){if(Modernizr.sessionstorage){if($this.hasClass("playlist")){sessionStorage.setItem("startsearchsetting","playlist")}if($this.hasClass("artist")){sessionStorage.setItem("startsearchsetting","artist")}if($this.hasClass("song")){sessionStorage.setItem("startsearchsetting","song")}}document.location.href="/echospot"}if(!$("#search:visible").length&&!$this.hasClass("top")){UserAgent.changePage("#search")}$("#permaheader").find("nav li a").removeClass("active");$this.addClass("active");if($this.hasClass("artist")){$("#search-byartist").trigger("click")}if($this.hasClass("song")){$("#search-bysong").trigger("click")}if($this.hasClass("playlist")){$("#search-byplaylist").trigger("click")}if($this.hasClass("help")){document.location.href="/echospot/help.html"}if($this.hasClass("top")){UserAgent.changePage("#top")}else{$("#top:visible").fadeOut(200)}}}return false});if($("#help").length){return}EchoCheck.fetchTopTerms(false,function(d){Output.setOutputToPage($("#styles"));Output.addCheckboxesToPage(d.terms);EventHandler.addsearchCheckboxFunctionality("styles");$("#styles .content fieldset").addClass("checkbox_container").insertAfter($("#styles_container"));$("#search-styles").on("click",function(){$("#styles_container").next().toggle(200);return false});EchoCheck.fetchTopTerms(true,function(e){Output.setOutputToPage($("#moods"));Output.addCheckboxesToPage(e.terms);EventHandler.addsearchCheckboxFunctionality("moods");$("#moods .content fieldset").addClass("checkbox_container").insertAfter($("#moods_container"));$("#search-moods").on("click",function(){$("#moods_container").next().toggle(200);return false})})});$("#search-playlisttype").change(function(){var d=$(this).val();var e=$("#search-primary").siblings("label");if(d=="artistdescription"){e.text("Artist description");$("#primary-fieldcontain").attr("title","Descriptive terms to search for, separated by commas (e.g. 80s, cold, funk).")}else{if(d=="songradio"){e.text("Spotify song URI(s)");$("#primary-fieldcontain").attr("title","Specific song URI(s) (spotify:track:xxx) separated by commas.")}else{e.text("Artist name(s)/URI(s)");$("#primary-fieldcontain").attr("title","Name of artist or artists to search for. Separate with commas.<br>A single artist can be a name description (e.g. 'Daft Punk') or a Spotify artist URI (e.g. 'spotify:artist:xxx')")}}});$("#slider-search-variety").slider({value:1,min:0,max:3,step:1,slide:function(g,f){var d="";switch(f.value){case 0:d="Low";break;case 1:d="Average";break;case 2:d="High";break;case 3:d="Very High";break}$("#search-variety").val(d)}});$("#slider-search-hotness,#slider-search-songhotness").slider({range:true,values:[0,3],min:0,max:3,step:1,slide:function(j,h){var f="";var g=h.values[0];var d=h.values[1];if(g==0){f="Low -"}if(g==1){f="Average -"}if(g==2){f="Hot -"}if(g==3){f="Super Hot -"}if(d==0){f="Low"}if(d==1){f+=" Average"}if(d==2){f+=" Hot"}if(d==3){f+=" Super Hot"}if(g==d){if(g==3){f="Super Hot"}else{f=f.match(/\w+/)}}if(g==0&&d==3){f="Low - Super Hot"}$(this).siblings("input").val(f)}});$("#slider-search-familiarity").slider({range:true,values:[0,2],min:0,max:2,step:1,slide:function(j,h){var f="";var g=h.values[0];var d=h.values[1];if(g==0){f="Obscure -"}if(g==1){f="Semi-familiar -"}if(g==2){f="Well known"}if(d==0){f="Obscure"}if(d==1){f+=" Semi-familiar"}if(d==2){f+=" Well known"}if(g==d){if(g==1){f="Semi-familiar"}if(g==2){f="Well known"}}if(g==0&&d==2){f="Obscure - Well Known"}$(this).siblings("input").val(f)}});$("#slider-search-energy").slider({range:true,values:[0,2],min:0,max:2,step:1,slide:function(j,h){var f="";var g=h.values[0];var d=h.values[1];if(g==0){f="Relaxed -"}if(g==1){f="Average -"}if(g==2){f="High"}if(d==0){f="Relaxed"}if(d==1){f+=" Average"}if(d==2){f+=" High"}if(g==d){if(g==1){f="Average"}if(g==2){f="High"}}if(g==0&&d==2){f="Relaxed - High"}$(this).siblings("input").val(f)}});$("#slider-search-danceability").slider({range:true,values:[0,2],min:0,max:2,step:1,slide:function(j,h){var f="";var g=h.values[0];var d=h.values[1];if(g==0){f="Low -"}if(g==1){f="Average -"}if(g==2){f="High"}if(d==0){f="Low"}if(d==1){f+=" Average"}if(d==2){f+=" High"}if(g==d){if(g==1){f="Average"}if(g==2){f="High"}}if(g==0&&d==2){f="Low - High"}$(this).siblings("input").val(f)}});$(".fieldcontain").tooltip({show:{effect:"fadeIn",delay:4000},position:{my:"left top",at:"left bottom+11"}});$("#search").find("#search-byartist,#search-bysong").on("click",function(){$("#search").find(".playlistonly").addClass("inactive");$("#search").find(".hideonplaylist").removeClass("inactive");if($(this).attr("id")=="search-bysong"){$("#search-primary").siblings("label").text("Artist name/URI");$("#search-header").text("Find Songs");$("#primary-fieldcontain").attr("title","Name of artist to search for.<br>A single artist can be a name description (e.g. 'Daft Punk') or a Spotify artist URI (e.g. 'spotify:artist:xxx')")}else{$("#search-primary").siblings("label").text("Artist name(s)/URI(s)");$("#search-header").text("Find Artists");$("#primary-fieldcontain").attr("title","Name of artist or artists to search for. Separate with commas.<br>A single artist can be a name description (e.g. 'Daft Punk') or a Spotify artist URI (e.g. 'spotify:artist:xxx')")}if($(this).attr("id")=="search-bysong"){$("#search-hotness").siblings("label").text("Song hotness")}else{$("#search-hotness").siblings("label").text("Artist hotness")}if(Modernizr.sessionstorage){sessionStorage.setItem("startsearchsetting",$(this).attr("id").replace("search-by",""))}});$("#search").find("#search-byplaylist").on("click",function(){$("#search").find(".playlistonly").removeClass("inactive");$("#search").find(".hideonplaylist").addClass("inactive");$("#search-playlisttype").trigger("change");$("#search-hotness").siblings("label").text("Artist hotness");$("#search-header").text("Generate a Playlist");if(Modernizr.sessionstorage){sessionStorage.setItem("startsearchsetting","playlist")}});$("#search").find("input.reset").on("click",function(){$("#search-primary,#search-terms").removeClass("error").siblings(".errorlabel").remove();$("#search-primary").val("");$("#primary-fieldcontain").attr("title","Name of artist or artists to search for. Separate with commas.<br>A single artist can be a name description (e.g. 'Daft Punk') or a Spotify artist URI (e.g. 'spotify:artist:xxx')");Output.clearCheckboxesPage("styles");Output.clearCheckboxesPage("moods");$("#search-startyear")[0].selectedIndex=0;$("#search-endyear")[0].selectedIndex=0;$("#search-terms").val("");$("#search-variety").val("Average");$("#slider-search-variety").slider("value",1);$("#search-playlisttype")[0].selectedIndex=0;$("#search-playlisttype").trigger("change");$("#search-hotness").val("Low - Super Hot");$("#slider-search-hotness").slider("values",[0,3]);$("#search-songhotness").val("Low - Super Hot");$("#slider-search-songhotness").slider("values",[0,3]);$("#search-familiarity").val("Obscure - Well Known");$("#slider-search-familiarity").slider("values",[0,2]);$("#search-energy").val("Relaxed - High");$("#slider-search-energy").slider("values",[0,2]);$("#search-danceability").val("Low - High");$("#slider-search-danceability").slider("values",[0,2]);$("#search-mintempo").val("");$("#search-maxtempo").val("");$("#search-results")[0].selectedIndex=1;$("#search-sortby")[0].selectedIndex=0;$("#search-sortbyplaylist")[0].selectedIndex=0;if($("#search-header").text()=="Find Songs"){$("#search-primary").siblings("label").text("Artist name/URI");$("#primary-fieldcontain").attr("title","Name of artist to search for.<br>A single artist can be a name description (e.g. 'Daft Punk') or a Spotify artist URI (e.g. 'spotify:artist:xxx')")}else{$("#search-primary").siblings("label").text("Artist name(s)/URI(s)");$("#primary-fieldcontain").attr("title","Name of artist or artists to search for. Separate with commas.<br>A single artist can be a name description (e.g. 'Daft Punk') or a Spotify artist URI (e.g. 'spotify:artist:xxx')")}});if(Modernizr.sessionstorage){var a=localStorage.getItem("startadvancedsettings");if(a==1){$(".advanced-options").removeClass("inactive");$("#search").find("input.options").val("Less Options")}}$("#search").find("input.options").on("click",function(){var d=$(".advanced-options");if(d.hasClass("inactive")){$(this).val("Less Options")}else{$(this).val("More Options")}d.toggleClass("inactive");if(Modernizr.sessionstorage){if($(".advanced-options").hasClass("inactive")){localStorage.setItem("startadvancedsettings",0)}else{localStorage.setItem("startadvancedsettings",1)}}});$("#search").find("input.submit").on("click",function(){$(".fieldcontain").tooltip("close");var e=$("#search");var k="artist";k=$.trim($("#permaheader .active").attr("class").replace("active",""));var o={};if(k=="song"){o.combined=jQuery.trim($("#search-primary").val())}else{o.primary=jQuery.trim($("#search-primary").val())}$("#search-primary,#search-terms").removeClass("error").siblings(".errorlabel").remove();if(k!="artist"){var d="#search-primary";if(!$.trim($(d).val()).length){$(d).addClass("error").focus().after('<p class="errorlabel">Required field</p>');return}}else{if(!$.trim($("#search-primary").val()).length&&!$.trim($("#search-terms").val()).length){$("#search-primary,#search-terms").addClass("error").focus().after('<p class="errorlabel">Required field - artist or term</p>');return}}Output.setOutputToPage($("#search_results"));if(k=="playlist"){$("#clip_content").show()}else{$("#clip_content").hide()}$("#permaheader nav a").removeClass("active");$("#search_results").addClass("loading");var f;f=Output.content.children();if(f.length){f.remove()}else{EventHandler.addArtistMenusFunctionality(Output.content)}UserAgent.changePage("#search_results");o.styles=$("#search-styles").text().replace("-","");o.moods=$("#search-moods").text().replace("-","");o.startyear=$("#search-startyear").val();if(o.startyear=="Start Year"){o.startyear=null}else{o.startyear=parseInt(o.startyear,10)}if(o.startyear==2012){o.staryear="present"}o.endyear=$("#search-endyear").val();if(o.endyear=="End Year"){o.endyear=null}else{o.endyear=parseInt(o.endyear,10)}o.description=jQuery.trim($("#search-terms").val());var l=$("#search-hotness").val().toLowerCase();o.hotnessmin=0;o.hotnessmax=1;if(l.indexOf("low")==0){o.hotnessmin=0;o.hotnessmax=0.4}if(l.indexOf("average")==0){o.hotnessmin=0.4;o.hotnessmax=0.5}if(l.indexOf("hot")==0){o.hotnessmin=0.5;o.hotnessmax=0.7}if(l.indexOf("super hot")==0){o.hotnessmin=0.7;o.hotnessmax=1}if(l.indexOf("- average")>-1){o.hotnessmax=0.5}if(l.indexOf("- hot")>-1){o.hotnessmax=0.7}if(l.indexOf("- super hot")>-1){o.hotnessmax=1}var h=$("#search-familiarity").val().toLowerCase();o.familiaritymin=0;o.familiaritymax=1;if(h.indexOf("obscure")==0){o.familiaritymin=0;o.familiaritymax=0.7}if(h.indexOf("semi-familiar")==0){o.familiaritymin=0.7;o.familiaritymax=0.8}if(h.indexOf("well known")==0){o.familiaritymin=0.8;o.familiaritymax=1}if(h.indexOf("- semi-familiar")>-1){o.familiaritymax=0.8}if(h.indexOf("- well known")>-1){o.familiaritymax=1}o.results=$("#search-results").val();o.sortby=$("#search-sortby").val();if(k=="song"){if(o.sortby=="hotness"){o.sortby="song_hotttnesss-desc"}else{o.sortby="artist_familiarity-desc"}}else{if(k=="artist"){if(o.sortby=="hotness"){o.sortby="hotttnesss-desc"}else{o.sortby="familiarity-desc"}}else{delete o.sortby}}if(k=="playlist"){o.playlisttype=$("#search-playlisttype").val();var n=$("#search-variety").val().toLowerCase();o.variety=0.4;o.distribution="focused";if(n=="very high"){o.variety=1;o.distribution="wandering"}if(n=="high"){o.variety=0.4;o.distribution="wandering"}if(n=="average"){o.variety=0.4}if(n=="low"){o.variety=0.1}o.mintempo=$("#search-mintempo").val();o.maxtempo=$("#search-maxtempo").val();var g=$("#search-songhotness").val().toLowerCase();o.songhotnessmin=0;o.songhotnessmax=1;if(g.indexOf("low")==0){o.songhotnessmin=0;o.songhotnessmax=0.4}if(g.indexOf("average")==0){o.songhotnessmin=0.4;o.songhotnessmax=0.5}if(g.indexOf("hot")==0){o.songhotnessmin=0.5;o.songhotnessmax=0.7}if(g.indexOf("super hot")==0){o.songhotnessmin=0.7;o.songhotnessmax=1}if(g.indexOf("- average")>-1){o.songhotnessmax=0.5}if(g.indexOf("- hot")>-1){o.songhotnessmax=0.7}if(g.indexOf("- super hot")>-1){o.songhotnessmax=1}var m=$("#search-energy").val().toLowerCase();o.energymin=0;o.energymax=1;if(m.indexOf("relaxed")==0){o.energymin=0;o.energymax=0.4}if(m.indexOf("average")==0){o.energymin=0.4;o.energymax=0.6}if(m.indexOf("high")==0){o.energymin=0.6;o.energymax=1}if(m.indexOf("- average")>-1){o.energymax=0.6}if(m.indexOf("- high")>-1){o.energymax=1}var j=$("#search-danceability").val().toLowerCase();o.danceabilitymin=0;o.danceabilitymax=1;if(j.indexOf("low")==0){o.danceabilitymin=0;o.danceabilitymax=0.3}if(j.indexOf("average")==0){o.danceabilitymin=0.3;o.danceabilitymax=0.58}if(j.indexOf("high")==0){o.danceabilitymin=0.58;o.danceabilitymax=1}if(j.indexOf("- average")>-1){o.danceabilitymax=0.58}if(j.indexOf("- high")>-1){o.danceabilitymax=1}o.sortbyplaylist=$("#search-sortbyplaylist").val()}EventHandler.addArtistMenusFunctionality(Output.content);EchoCheck.powerSearch(k,o,function(p){$("#search_results").removeClass("loading");$("#permaheader").find(".csv_container,.spot_container").addClass("active");if(k=="artist"){Output.addArtistsToPage(p.artists,$("#search-sortby").val());if(!p.artists.length){Output.saveArtistRow("No artists found");Output.addContentRows()}}else{if(k=="song"||k=="playlist"){if(!p.songs.length){Output.saveSongRow("No songs found");Output.addContentRows()}else{if(k=="song"){Output.addSongsToPage(p.songs,$("#search-sortby").val())}else{Output.addSongsToPage(p.songs,$("#search-sortbyplaylist").val(),o)}}}}Output.content.trigger("create");$("#permafooter").show();$("#clip_content").css("visibility","visible")})});$("#search-primary").on("keypress",function(d){if(d.keyCode==13&&!d.ctrlKey&&!d.shiftKey&&!d.altKey){$("#search").find("input.submit").trigger("click")}});if(Modernizr.sessionstorage&&!$("#help").length){var b=sessionStorage.getItem("startsearchsetting");if(b=="song"){$("#search-byartist").prop("checked",false);$("#search-bysong").trigger("click").prop("checked",true);$("#permaheader").find("nav li a").removeClass("active");$("#permaheader a.song").addClass("active")}if(b=="playlist"){$("#search-byartist").prop("checked",false);$("#search-byplaylist").trigger("click").prop("checked",true);$("#permaheader").find("nav li a").removeClass("active");$("#permaheader a.playlist").addClass("active")}if(b=="artist"){$("#search-byartist").trigger("click").prop("checked",true);$("#permaheader").find("nav li a").removeClass("active");$("#permaheader a.artist").addClass("active")}}EventHandler.addsearchCheckboxFunctionality("styles");EventHandler.addsearchCheckboxFunctionality("moods");Output.setOutputToPage($("#top"));EventHandler.addArtistMenusFunctionality(Output.content);EchoCheck.fetchTopHotArtists(40,function(d){Output.setOutputToPage($("#top"));Output.addArtistsToPage(d.artists);Output.content.trigger("create")})});EchoCheck={api:"PWNYOEPUNHQTGZLHY",base:"http://developer.echonest.com/api/v4/",callJSON:function(a,c,b){$.ajax({url:a,dataType:"json",data:c,success:function(d){if(EchoCheck.checkResponse(d)){if(typeof b=="function"){b(d.response)}}},error:function(e,d){if(Output.currentId=="search_results"){$("#search_results").removeClass("loading");Output.saveArtistRow("Unexpected error from server.");Output.addContentRows()}else{Output.setOutputToPage($("#search_results"));$("#search_results").removeClass("loading");Output.saveArtistRow("Unexpected error from server.");Output.addContentRows();$("#clip_content").hide();UserAgent.changePage("#search_results")}},timeout:4000})},checkResponse:function(a){if(a.response){if(a.response.status.code!==0){if(Output.currentId=="search_results"){$("#search_results").removeClass("loading");Output.saveArtistRow("Unexpected error from server. "+a.response.status.message);Output.addContentRows()}else{Output.setOutputToPage($("#search_results"));$("#search_results").removeClass("loading");Output.saveArtistRow("Unexpected error from server. "+a.response.status.message);Output.addContentRows();$("#clip_content").hide();UserAgent.changePage("#search_results")}}else{return true}}else{if(Output.currentId=="search_results"){Output.saveArtistRow("Unexpected error from server.");Output.addContentRows()}else{Output.setOutputToPage($("#search_results"));Output.saveArtistRow("Unexpected error from server. "+a.response.status.message);Output.addContentRows();$("#clip_content").hide();UserAgent.changePage("#search_results")}}return false},findRelatedArtists:function(c,b,e){if(typeof c!="string"){return}var a=this.base+"artist/similar?callback=?&bucket=id:spotify-WW&bucket=hotttnesss&bucket=familiarity&bucket=terms";var d={format:"jsonp",api_key:this.api,limit:true,start:0,results:30};if(b){d.name=c}else{d.id=c}this.callJSON(a,d,e)},fetchTopTerms:function(a,d){if(typeof a!="boolean"&&typeof a!="undefined"){return}var b=this.base+"artist/list_terms?callback=?";var c=(a)?"mood":"style";this.callJSON(b,{format:"jsonp",api_key:this.api,type:c},d)},fetchTopHotArtists:function(b,c){if(typeof b!="number"){return}var a=this.base+"artist/top_hottt?callback=?&bucket=id:spotify-WW&bucket=hotttnesss&bucket=familiarity&bucket=terms";this.callJSON(a,{format:"jsonp",api_key:this.api,limit:true,results:b},c)},powerSearch:function(e,k,h){if(typeof e!="string"||typeof k!="object"){return}var a=this.base+"artist/search?callback=?&bucket=id:spotify-WW&bucket=hotttnesss&bucket=familiarity&bucket=terms";if(e=="song"){a=this.base+"song/search?callback=?&bucket=id:spotify-WW&bucket=tracks&bucket=song_hotttnesss&bucket=artist_hotttnesss&bucket=audio_summary&bucket=artist_familiarity"}else{if(e=="playlist"){a=this.base+"playlist/static?callback=?&bucket=id:spotify-WW&bucket=tracks&bucket=song_hotttnesss&bucket=artist_hotttnesss&bucket=audio_summary&bucket=artist_familiarity";if(k.primary&&k.playlisttype&&k.playlisttype=="artistdescription"){var g=k.primary.split(",");for(var d=0;d<g.length;d++){a+="&description="+jQuery.trim(g[d])}}else{if(k.primary&&k.playlisttype&&(k.playlisttype=="artistradio"||k.playlisttype=="artist"||k.playlisttype=="songradio")){var b=k.primary.split(",");for(var c=0;c<b.length;c++){if(b[c].indexOf("spotify:artist")>-1){a+="&artist_id=spotify-WW:"+jQuery.trim(b[c].replace("spotify:",""))}else{if(b[c].indexOf("spotify:track")>-1){a+="&track_id=spotify-WW:"+jQuery.trim(b[c].replace("spotify:",""))}else{a+="&artist="+jQuery.trim(b[c])}}}}}}}var f={format:"jsonp",api_key:this.api,sort:"hotttnesss-desc",limit:true,results:50,min_hotttnesss:0.1};if(k.primary&&e=="artist"){delete f.min_hotttnesss;f.name=k.primary}else{if(e=="song"&&k.combined){f.combined=k.combined}if(k.styles){f.style=k.styles}if(k.moods){f.mood=k.moods}if(k.description&&e!="playlist"){f.description=k.description}if(e=="song"){delete f.min_hotttnesss;if(k.hotnessmin||k.hotnessmin===0){f.song_min_hotttnesss=k.hotnessmin}if(k.hotnessmax){f.song_max_hotttnesss=k.hotnessmax}}else{if(e=="playlist"){delete f.min_hotttnesss;if(k.hotnessmin||k.hotnessmin===0){f.artist_min_hotttnesss=k.hotnessmin}if(k.hotnessmax){f.artist_max_hotttnesss=k.hotnessmax}}else{if(k.hotnessmin||k.hotnessmin===0){f.min_hotttnesss=k.hotnessmin}if(k.hotnessmax){f.max_hotttnesss=k.hotnessmax}}}if(e=="song"||e=="playlist"){if(k.familiaritymin||k.familiaritymin===0){f.artist_min_familiarity=k.familiaritymin}if(k.familiaritymax){f.artist_max_familiarity=k.familiaritymax}}else{if(k.familiaritymin||k.familiaritymin===0){f.min_familiarity=k.familiaritymin}if(k.familiaritymax){f.max_familiarity=k.familiaritymax}}if(k.startyear){f.artist_end_year_after=k.startyear+1;if(k.startyear==2012){f.artist_end_year_after="present"}}if(k.endyear){f.artist_start_year_before=k.endyear+1;if(k.endyear==2012){f.artist_start_year_before="present"}}if(e=="song"){f.sort="song_hotttnesss-desc"}if(k.sortby){f.sort=k.sortby}if(k.results){f.results=k.results}if(e=="playlist"){delete f.sort;if(k.playlisttype&&k.playlisttype=="artistdescription"){delete f.artist;f.type="artist-description"}else{delete f.description;if(k.playlisttype=="songradio"){f.type="song-radio"}else{if(k.playlisttype=="artist"){f.type="artist"}else{f.type="artist-radio"}}}if(k.variety){f.variety=k.variety}if(k.mintempo){f.min_tempo=k.mintempo}if(k.maxtempo){f.max_tempo=k.maxtempo}if(k.distribution){f.distribution=k.distribution}if(k.songhotnessmin||k.songhotnessmin===0){f.song_min_hotttnesss=k.songhotnessmin}if(k.songhotnessmax){f.song_max_hotttnesss=k.songhotnessmax}if(k.energymin||k.energymin===0){f.min_energy=k.energymin}if(k.energymax){f.max_energy=k.energymax}if(k.danceabilitymin||k.danceabilitymin===0){f.min_danceability=k.danceabilitymin}if(k.danceabilitymax){f.max_danceability=k.danceabilitymax}if(k.sortbyplaylist&&k.sortbyplaylist!="random"){f.sort=k.sortbyplaylist}}}this.callJSON(a,f,h)}};Output={artistDetail:{},clipboard:null,colorSpectrumLength:10,colorSpectrumIndex:0,content:null,contentId:"",contentRows:[],contentSongLinkRows:[],footerContent:'<div class="footer"><div><ul><li><a class="search" href="#search">Search</a></li><li><a class="top" href="#top">Top</a></li></ul></div></div>',plainTextContentRows:[],songDetail:{},addRow:function(a){this.content.append("<div><h3>"+a+"</h3></div>").trigger("create");this.colorSpectrumLengthIndex++},addContentRows:function(a){if(!a){this.content.append(this.contentRows.join("")).trigger("create")}else{a.append(this.contentRows.join("")).trigger("create")}this.contentRows=[]},addArtistsToPage:function(a,g){for(var c=0;c<a.length;c++){var e=a[c];var d=Output.artistDetail[e.name];if(typeof d=="undefined"){Output.artistDetail[e.name]={echoid:e.id,spotlink:null,terms:null};d=Output.artistDetail[e.name]}else{d.echoid=e.id}d[this.contentId+"_order"]=c;var f=[];for(var b=0;b<e.terms.length;b++){f.push(e.terms[b].name)}d.terms=f;var h="#";if(typeof e.foreign_ids=="object"&&typeof e.foreign_ids[0]=="object"){h="spotify://"+e.foreign_ids[0].foreign_id.replace("spotify-WW:","")}Output.saveArtistRow(e.name,e.hotttnesss,e.familiarity,f,h)}if(typeof g=="string"){Output.sortOutput(g,false)}Output.addContentRows()},addCheckboxesToPage:function(d){var e=Output.content.find("fieldset");if(!e.length){return}var b="";for(var c=0;c<d.length;c++){var a=d[c].name.replace(/(\s)+/,"_");b+='<input type="checkbox" name="style-'+a+'" id="style-'+a+'" class="custom" />';b+='<label for="style-'+a+'">'+d[c].name+"</label>"}e.append(b);Output.content.trigger("create")},addNewPage:function(d,c,a){if(typeof d!="string"||typeof c!="string"){return}d=d.replace(/\s+/g,"_");var b='<div class="page" id="'+d+'" class="'+a+'"><div class="header"><h2>'+c+'</h2></div><div class="content"></div>';$("#permafooter").before(b)},addSongsToPage:function(f,e,a){for(var b=0;b<f.length;b++){var d=f[b];var c=Output.songDetail[d.title];if(typeof c=="undefined"){Output.songDetail[d.title]={echoartistid:d.artist_id,echosongid:d.id,spotlink:null};c=Output.songDetail[d.title]}else{c.id=d.id;c.artist_id=d.artist_id}c[this.contentId+"_order"]=b;var g="#";if(typeof d.tracks=="object"&&typeof d.tracks[0]=="object"){g="spotify://"+d.tracks[0].foreign_id.replace("spotify-WW:","")}if(typeof a!="object"||Output.filterOutput(d,a)){Output.saveSongRow(d.title,d.artist_name,d.song_hotttnesss,d.artist_hotttnesss,d.artist_familiarity,d.audio_summary.danceability,d.audio_summary.energy,d.audio_summary.tempo,g)}}if(typeof e=="string"&&e!="random"){Output.sortOutput(e,true)}Output.addContentRows();if(UserAgent.miniWidth){$("#search_results").click(function(j){j.preventDefault();if(j.target.tagName=="H3"){var h=$(j.target).siblings("ul").find("a");if(h.length){document.location.href=h.attr("href")}}})}},addSpotifyLinkToArtistRow:function(c,b){var a=this.content.children().eq(b);if(!a.length){return}var d;d=a.find("ul");d.prepend('<li><a href="'+c+">Spotify Link</a></li>").trigger("create")},addSpotifyLinkToSongRow:function(c,b){var a=this.content.children().eq(b);if(!a.length){return}var d;d=a.find("ul");d.prepend('<li><a href="'+c+">Spotify Link</a></li>").trigger("create")},clearCheckboxesPage:function(a){var b=$("#search").find("input").filter(":checked");b.prop("checked",false);$("#search-"+a).text("-")},saveArtistRow:function(a,e,d,b,c){var f;f='<div class="artistrow"><h3>'+a+"</h3>";this.colorSpectrumIndex++;if(typeof e=="undefined"){f+="</div>"}else{f+="<ul>";if(UserAgent.miniWidth){f+='<li><a href="'+c+'">Spotify Link</a></li><li>H: '+Math.round(e*100)+"%</li><li>F: "+Math.round(d*100)+"%</li>"}else{f+='<li><a href="'+c+'">Spotify Link</a></li><li>Hotness: '+Math.round(e*100)+"%</li><li>Familiarity: "+Math.round(d*100)+"%</li>"}this.artistDetail[a].terms=b;f+="</ul></div>"}this.contentRows.push(f);this.plainTextContentRows.push('"'+a+'"')},saveSongRow:function(k,h,d,c,g,f,l,e,j){var b;var a=Math.floor(this.colorSpectrumIndex/this.colorSpectrumLength)%2?(this.colorSpectrumIndex%this.colorSpectrumLength):this.colorSpectrumLength-(this.colorSpectrumIndex%this.colorSpectrumLength);if(typeof h=="undefined"){b='<div class="songrow"><h3>'+k+"</h3>"}else{b='<div class="songrow"><h3>'+k+" - "+h+"</h3>"}this.colorSpectrumIndex++;if(typeof h=="undefined"){b+="</div>"}else{b+="<ul>";b+='<li><a href="'+j+'">Spotify Link</a></li>';b+="<li>SH: "+Math.round(d*100)+"%</li><li>AH: "+Math.round(c*100)+"%</li>";b+="<li>AF: "+Math.round(g*100)+"%</li><li>D: "+Math.round(f*100)+"%</li>";if(!UserAgent.miniWidth){b+="<li>E: "+Math.round(l*100)+'%</li><li class="last">T: '+e+"</li>"}b+="</ul></div>"}this.contentRows.push(b);this.plainTextContentRows.push('"'+k+'","'+h+'"');this.contentSongLinkRows.push(j)},setOutputToPage:function(b){if(typeof b!="object"){return}var a=$(b).find(".content");if(!a.length){return}this.contentId=b.attr("id");this.contentRows=[];this.contentSongLinkRows=[];if(b.attr("id")=="search_results"){if(Modernizr.sessionstorage&&sessionStorage.getItem("startsearchsetting")=="artist"){this.plainTextContentRows=['"Artist"']}else{if(Modernizr.sessionstorage&&sessionStorage.getItem("startsearchsetting")=="song"){this.plainTextContentRows=['"Song"']}else{this.plainTextContentRows=['"Song","Artist"']}}}else{this.plainTextContentRows=['"Artist"']}this.content=a;this.colorSpectrumIndex=0},filterOutput:function(b,a){return((b.artist_familiarity>=a.familiaritymin)&&(b.artist_familiarity<=a.familiaritymax)&&(b.artist_hotttnesss>=a.hotnessmin)&&(b.artist_hotttnesss<=a.hotnessmax)&&(b.audio_summary.danceability>=a.danceabilitymin)&&(b.audio_summary.danceability<=a.danceabilitymax)&&(b.audio_summary.energy>=a.energymin)&&(b.audio_summary.energy<=a.energymax)&&(a.mintempo.length===0||b.audio_summary.tempo>=a.mintempo)&&(a.maxtempo.length===0||b.audio_summary.tempo<=a.maxtempo)&&(b.song_hotttnesss>=a.songhotnessmin)&&(b.song_hotttnesss<=a.songhotnessmax))},sortOutput:function(h,g){var d=true;if(g){if(h.indexOf("asc")>-1){d=false}if(h.indexOf("song_hotttnesss")>-1||h.indexOf("hotness")>-1){h="SH"}if(h.indexOf("artist_hotttnesss")>-1){h="AH"}if(h.indexOf("artist_familiarity")>-1||h.indexOf("familiarity")>-1){h="AF"}if(h.indexOf("tempo")>-1){h="T"}if(h.indexOf("danceability")>-1){h="D"}if(h.indexOf("energy")>-1){h="E"}}var f=new RegExp(">"+h+": (\\d)+","i");Output.contentRows.sort(function(k,j){var o=k.match(f);var m=j.match(f);if(!o||!m){return 1}var n=parseFloat(o[0].match(/\d+/)[0],10);var l=parseFloat(m[0].match(/\d+/)[0],10);return d?l-n:n-l});g=(Output.contentRows[0].match(/<h3>(.*)<\/h3>/)[1].indexOf("-")>-1);if(g){Output.plainTextContentRows=["Artist,Song"]}else{Output.plainTextContentRows=["Artist"]}Output.contentSongLinkRows=[];for(i=0;i<Output.contentRows.length;i++){var c=Output.contentRows[i].match(/<h3>(.*)<\/h3>/)[1];if(g){var e=Output.contentRows[i].match(/<a href="(.*)">Spotify/)[1];var b=$.trim(c.match(/-(.*)/)[1]);var a=$.trim(c.match(/-(.*)/)[1]);Output.plainTextContentRows.push('"'+b+'","'+a+'"');Output.contentSongLinkRows.push(e)}else{Output.plainTextContentRows.push('"'+c+'"')}}}};EventHandler={addArtistMenusFunctionality:function(a){var c="click";var b=".ui-collapsible-heading a";c="mouseover";b="div.artistrow,div.songrow";a.on(c,b,function(){$this=$(this);if(!$this.find("a.terms_link:visible").length){var g;g=$this;if(!g.find("a.terms_link").length){var h;h=jQuery.trim($this.find("h3").html().replace(/<span(.*)<\/span>/,""));var e=Output.artistDetail[h];if(typeof e=="object"){var d;d=g.find("ul");var j=d.html();var f="<ul>"+j+'<li><a class="terms_link" href="#">Terms</a></li>';f+='<li class="last"><a class="related_link" href="#">Related artists</a></li></ul>';d.replaceWith(f);g.trigger("create")}g.on("click","a.terms_link",function(){$("#permaheader").find("nav a.top").removeClass("active");var m=h.replace(/\s+/g,"")+"_terms";if(!$("#"+m).length){Output.addNewPage(m,h+" terms","terms");Output.setOutputToPage($("#"+m));var l="<ul>";for(var k=0;k<e.terms.length;k++){l+='<li class="termsrow"><a href="#search">'+e.terms[k]+"</a></li>"}l+="</ul>";Output.content.append(l).trigger("create");UserAgent.changePage("#"+m);$("#"+m).on("click","a",function(){$("#search-terms").val(jQuery.trim($(this).text()));UserAgent.changePage("#search");$("#permaheader nav a.artist").trigger("click");return false})}else{UserAgent.changePage("#"+m)}return false});g.on("click","a.related_link",function(){$("#permaheader").find("nav a.top").removeClass("active");var k=h.replace(/\s+/g,"")+"_related";if(!$("#"+k).length){Output.addNewPage(k,h+" related artists","related");Output.setOutputToPage($("#"+k));EventHandler.addArtistMenusFunctionality(Output.content);UserAgent.changePage("#"+k);$("#"+k).addClass("loading");$("#permafooter").css("visibility","hidden");EchoCheck.findRelatedArtists(e.echoid,false,function(l){Output.addArtistsToPage(l.artists);$("#permafooter").css("visibility","visible");$("#"+k).removeClass("loading")});return false}else{UserAgent.changePage("#"+k)}})}$this.find("a.terms_link,a.related_link").parent().show()}})},addsearchCheckboxFunctionality:function(a){var c=$("#"+a).find("fieldset");if(!c.length){return}var b;b="label";c.find(b).click(function(){var d;d=$(this).prev().attr("name").replace("style-","").replace("_"," ");var f;f=$("#search-"+a);var e=jQuery.trim(f.text());if(this.checked||(!$(this).prev()[0].checked)){if(e=="-"){e=d}else{e+=", "+d}}else{e=e.replace(", "+d,"").replace(d+",","").replace(d,"");if(e===""){e="-"}}f.text(e)})}};